<!doctype html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>REF // Gate</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, interactive-widget=resizes-content">
  <meta name="format-detection" content="telephone=no,email=no,url=no">

  <link rel="preload" as="image" href="avatar/avatar_intro.png">
  <link rel="stylesheet" href="glitchreport.css?v=306">
</head>
<body>
  <!-- Fixed top-right back link -->
  <a href="artist.html" class="back-fixed" aria-label="Back to artist">
    &lt; <span class="back-label">back</span> &gt;
  </a>

  <!-- Success banner (overlay on mobile; no layout shift) -->
  <div id="reg-banner" class="reg-banner" aria-live="polite" role="status"></div>

  <div class="wrap">
    <div class="stage">
      <div class="figure" aria-hidden="true"></div>
    </div>

    <div class="terminal">
      <div class="line">
        <span id="static-part"></span><span id="typed-part"></span>
      </div>

      <div class="prompt" id="prompt">
        <span class="caret">></span>
        <span id="typed" class="typed"></span>

        <!-- Real input (kept tiny and transparent; JS mirrors it into #typed) -->
        <input
          id="cmd"
          class="cmd"
          type="text"
          inputmode="email"
          autocomplete="email"
          autocapitalize="off"
          spellcheck="false"
          name="newsletter_email"
          data-lpignore="true"
          data-form-type="other">
      </div>

      <div id="hint" class="hint" aria-live="polite"></div>

      <!-- MailerLite form (kept off-screen but not display:none) -->
      <form
        id="ml-form"
        action="https://assets.mailerlite.com/jsonp/1876316/forms/169740892998993529/subscribe"
        method="post"
        target="ml_iframe"
        style="position:absolute;left:-9999px;width:1px;height:1px;overflow:hidden;"
      >
        <input type="email" name="fields[email]" id="ml-email" required>
        <input type="hidden" name="ml-submit" value="1">
        <!-- honeypot: not display:none so bots still see it -->
        <input type="text" name="website" tabindex="-1" autocomplete="off" class="hp-field">
      </form>

      <!-- Background iframe to receive ML response -->
      <iframe name="ml_iframe" id="ml_iframe" title="ml-response"></iframe>
    </div>
  </div>

  <script src="glitchreport.js?v=304"></script>
  <script>
    (function(){
      const params = new URLSearchParams(location.search);
      const isComplete = params.get('registration') === 'complete';
      if (!isComplete) return;
      const b = document.getElementById('reg-banner');
      if (!b) return;
      b.textContent = "registration complete";
      b.classList.add('show');

      // Optional: remove the query param so refresh doesnâ€™t keep the banner
      try {
        const url = new URL(location.href);
        url.searchParams.delete('registration');
        window.history.replaceState({}, "", url.toString());
      } catch(_) {}
    })();
  </script>
</body>
</html>
