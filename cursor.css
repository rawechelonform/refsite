/* ===== Page baseline ===== */
html, body{
  height:100%;
  margin:0;
  background:#000 !important;         /* hard black */
  color:#ddd;
  font:14px/1.5 system-ui, -apple-system, "Segoe UI", Roboto, sans-serif;
}
body::before{
  content:"";
  position:fixed;
  inset:0;
  background:#000;
  z-index:-1;                          /* backstop layer */
}

/* Demo UI (optional) */
.ui{ max-width:760px; margin:40px auto; padding:0 16px; }
h1{ color:#fff; margin:0 0 8px; font-size:22px; }
button{
  background:#111; color:#ddd; border:1px solid #333;
  padding:8px 12px; border-radius:6px; cursor:pointer;
}
button:hover{ background:#1a1a1a; }

/* ===== Hide native cursor while “inside” =====
   JS toggles html[data-cursor="off"] */
html[data-cursor="off"], html[data-cursor="off"] *{
  cursor:
    url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='1' height='1'/>") 0 0,
    none !important;
}
html[data-cursor="off"] input,
html[data-cursor="off"] textarea,
html[data-cursor="off"] [contenteditable]{
  caret-color: transparent !important;
}

/* ===== Shield layer (sits under cursor, above page) ===== */
#cursor-shield{
  position:fixed; inset:0;
  background:transparent;
  z-index:2147483646;                  /* below the crosshair, above content */
  cursor:none !important;
  display:none;                         /* JS toggles on/off */
}

/* ===== Crosshair visuals (two diagonals + dot) ===== */
:root{
  --s: 34px;          /* overall size */
  --t: 2px;           /* arm thickness */
  --g: 18px;          /* center gap between arms */
  --d: 3px;           /* center dot size */
}

#custom-cursor{
  position:fixed; left:0; top:0;
  width:var(--s); height:var(--s);
  transform:translate(-50%, -50%);
  pointer-events:none;
  z-index:2147483647;
  color:#fff;
  mix-blend-mode:difference;           /* stays visible on light/dark */
  filter: drop-shadow(0 0 .5px rgba(0,0,0,.6)) drop-shadow(0 0 1px rgba(0,0,0,.5));
  display:none;                         /* JS shows/hides */
}

#custom-cursor .arm{
  position:absolute; left:50%; top:50%;
  width:var(--s); height:var(--t);
  transform-origin:50% 50%;
  background:linear-gradient(
    90deg,
    currentColor 0 calc(50% - (var(--g)/2)),
    transparent  calc(50% - (var(--g)/2)) calc(50% + (var(--g)/2)),
    currentColor calc(50% + (var(--g)/2)) 100%
  );
}

/* Important: distinct class names; don’t use `.arm.b` */
#custom-cursor .arm-a{ transform:translate(-50%, -50%) rotate(45deg); }
#custom-cursor .arm-b{ transform:translate(-50%, -50%) rotate(-45deg); }

#custom-cursor .dot{
  position:absolute; left:50%; top:50%;
  width:var(--d); height:var(--d);
  transform:translate(-50%, -50%);
  border-radius:50%;
  background:currentColor;
}

/* ===== Spin + click effects (driven by JS) ===== */
@keyframes cursor-spin{
  from { transform: translate(-50%, -50%) rotate(0); }
  to   { transform: translate(-50%, -50%) rotate(360deg); }
}

/* click implode (optional; JS toggles .implode) */
#custom-cursor.implode .arm-a,
#custom-cursor.implode .arm-b{ animation: arm-implode 220ms ease-out forwards; }

@keyframes arm-implode{
  0%   { transform: translate(-50%, -50%) rotate(var(--deg,45deg)) scaleX(1); }
  60%  { transform: translate(-50%, -50%) rotate(var(--deg,45deg)) scaleX(0.25); }
  100% { transform: translate(-50%, -50%) rotate(var(--deg,45deg)) scaleX(0); }
}
/* supply the different angles via CSS variables */
#custom-cursor.implode .arm-a{ --deg: 45deg; }
#custom-cursor.implode .arm-b{ --deg:-45deg; }

#custom-cursor.implode .dot{ animation: dot-pop 220ms ease-out; }
@keyframes dot-pop{
  0% { transform: translate(-50%, -50%) scale(1); }
  60%{ transform: translate(-50%, -50%) scale(1.25); }
  100%{ transform: translate(-50%, -50%) scale(1); }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  #custom-cursor{ animation:none !important; }
  #custom-cursor.implode .arm-a,
  #custom-cursor.implode .arm-b,
  #custom-cursor.implode .dot{ animation:none !important; }
}
