/* ===== pointer-lock crosshair (idle spin + implode click) ===== */

/* Page */
html, body{
  height: 100%;
  margin: 0;
  background: #000;
  color: #ddd;
  font: 14px/1.5 system-ui, -apple-system, "Segoe UI", Roboto, sans-serif;
}
.ui{ max-width: 760px; margin: 40px auto; padding: 0 16px; }
h1{ color:#fff; margin:0 0 8px; font-size:22px; }
.status{ opacity:.85; font-size:12px; margin: 6px 0 10px; }

#lockBtn{
  display:inline-block;
  background:#111; color:#ddd; border:1px solid #333;
  padding:8px 12px; border-radius:6px; cursor:pointer;
  user-select:none; -webkit-tap-highlight-color: transparent;
}
#lockBtn:hover{ background:#1a1a1a; }
#lockBtn:focus{ outline:none; }

/* Full-screen overlay to request lock (prevents focus jump to button) */
.lock-overlay{
  position: fixed; inset: 0; display: grid; place-items: center;
  background: rgba(0,0,0,.65); color:#ddd; z-index: 2147483646;
  cursor: default;
}
.lock-overlay .card{
  background: rgba(20,20,20,.92);
  border:1px solid #333; border-radius:10px;
  padding:18px 22px; text-align:center; max-width:560px;
}
.lock-overlay h2{ margin:0 0 8px; color:#fff; font-size:18px; }
.lock-overlay p { margin:0; font-size:13px; opacity:.9; }

/* Crosshair visuals */
:root{
  --cursor-size: 34px;
  --cursor-thick: 2px;
  --cursor-gap: 18px;
  --cursor-dot: 3px;
}
#custom-cursor{
  position: fixed; left: 0; top: 0;
  width: var(--cursor-size); height: var(--cursor-size);
  transform: translate(-50%, -50%);
  pointer-events: none; z-index: 2147483647;
  color:#fff; mix-blend-mode: difference;
  filter: drop-shadow(0 0 .5px rgba(0,0,0,.6)) drop-shadow(0 0 1px rgba(0,0,0,.5));
  isolation: auto;
  animation: none;
  display: none; /* only shown while locked */
}
#custom-cursor .arm{
  position:absolute; left:50%; top:50%;
  width: var(--cursor-size); height: var(--cursor-thick);
  transform-origin:50% 50%;
  transform: translate(-50%, -50%) rotate(45deg);
  background: linear-gradient(
    90deg,
    currentColor 0 calc(50% - (var(--cursor-gap) / 2)),
    transparent  calc(50% - (var(--cursor-gap) / 2)) calc(50% + (var(--cursor-gap) / 2)),
    currentColor calc(50% + (var(--cursor-gap) / 2)) 100%
  );
}
#custom-cursor .arm-b{ transform: translate(-50%, -50%) rotate(-45deg); }
#custom-cursor .dot{
  position:absolute; left:50%; top:50%;
  width: var(--cursor-dot); height: var(--cursor-dot);
  transform: translate(-50%, -50%); border-radius:50%; background: currentColor;
}

/* Spin (JS sets duration/direction) */
@keyframes cursor-spin{
  from { transform: translate(-50%, -50%) rotate(0); }
  to   { transform: translate(-50%, -50%) rotate(360deg); }
}

/* Click: arms implode into center */
#custom-cursor.implode .arm,
#custom-cursor.implode .arm-b{ animation: arm-implode 220ms ease-out forwards; }
@keyframes arm-implode{
  0%   { transform: translate(-50%, -50%) rotate(45deg) scaleX(1); }
  60%  { transform: translate(-50%, -50%) rotate(45deg) scaleX(0.25); }
  100% { transform: translate(-50%, -50%) rotate(45deg) scaleX(0); }
}
#custom-cursor.implode .arm-b{ animation-name: arm-implode-b; }
@keyframes arm-implode-b{
  0%   { transform: translate(-50%, -50%) rotate(-45deg) scaleX(1); }
  60%  { transform: translate(-50%, -50%) rotate(-45deg) scaleX(0.25); }
  100% { transform: translate(-50%, -50%) rotate(-45deg) scaleX(0); }
}
#custom-cursor.implode .dot{ animation: dot-pop 220ms ease-out; }
@keyframes dot-pop{
  0% { transform: translate(-50%, -50%) scale(1); }
  60%{ transform: translate(-50%, -50%) scale(1.25); }
  100%{ transform: translate(-50%, -50%) scale(1); }
}

@media (prefers-reduced-motion: reduce){
  #custom-cursor{ animation: none !important; }
  #custom-cursor.implode .arm,
  #custom-cursor.implode .arm-b,
  #custom-cursor.implode .dot{ animation: none !important; }
}

/* Hide native cursor ONLY while locked */
html.pointer-locked, html.pointer-locked *{ cursor: none !important; }
