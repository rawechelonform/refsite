/* ===== cursor_pl.css â€” pointer-lock crosshair (idle spin + implode click) ===== */

/* Page (kept here so the sandbox isn't white) */
html, body{
  height: 100%;
  margin: 0;
  background: #000;
  color: #ddd;
  font: 14px/1.5 system-ui, -apple-system, "Segoe UI", Roboto, sans-serif;
}
.ui{ max-width: 760px; margin: 40px auto; padding: 0 16px; }
h1{ color:#fff; margin:0 0 8px; font-size:22px; }
.status{ opacity:.85; font-size:12px; margin: 6px 0 10px; }
button{
  background:#111; color:#ddd; border:1px solid #333;
  padding:8px 12px; border-radius:6px; cursor:pointer;
}
button:hover{ background:#1a1a1a; }
/* optional: if the lock button ever regains focus briefly, suppress ring */
#lockBtn:focus { outline: none; }

/* ===== Crosshair visuals ===== */
:root{
  --cursor-size: 34px;
  --cursor-thick: 2px;
  --cursor-gap: 18px;
  --cursor-dot: 3px;
}

#custom-cursor{
  position: fixed;
  left: 0; top: 0;
  width: var(--cursor-size);
  height: var(--cursor-size);
  transform: translate(-50%, -50%);
  pointer-events: none;
  z-index: 2147483647;

  color: #fff;
  mix-blend-mode: difference;

  filter:
    drop-shadow(0 0 .5px rgba(0,0,0,.6))
    drop-shadow(0 0 1px rgba(0,0,0,.5));
  isolation: auto;

  /* baseline: no animation unless JS sets one */
  animation: none;
}

#custom-cursor .arm{
  position: absolute;
  left: 50%; top: 50%;
  width: var(--cursor-size);
  height: var(--cursor-thick);
  transform-origin: 50% 50%;
  transform: translate(-50%, -50%) rotate(45deg);
  background:
    linear-gradient(
      90deg,
      currentColor 0 calc(50% - (var(--cursor-gap) / 2)),
      transparent  calc(50% - (var(--cursor-gap) / 2)) calc(50% + (var(--cursor-gap) / 2)),
      currentColor calc(50% + (var(--cursor-gap) / 2)) 100%
    );
}
#custom-cursor .arm-b{ transform: translate(-50%, -50%) rotate(-45deg); }

#custom-cursor .dot{
  position: absolute;
  left: 50%; top: 50%;
  width: var(--cursor-dot);
  height: var(--cursor-dot);
  transform: translate(-50%, -50%);
  border-radius: 50%;
  background: currentColor;
}

/* ===== Animations ===== */

/* idle/click spin (direction & duration set in JS) */
@keyframes cursor-spin{
  from { transform: translate(-50%, -50%) rotate(0); }
  to   { transform: translate(-50%, -50%) rotate(360deg); }
}

/* implode: arms collapse into the center */
#custom-cursor.implode .arm,
#custom-cursor.implode .arm-b{
  animation: arm-implode 220ms ease-out forwards;
}
@keyframes arm-implode{
  0%   { transform: translate(-50%, -50%) rotate(45deg) scaleX(1); }
  60%  { transform: translate(-50%, -50%) rotate(45deg) scaleX(0.25); }
  100% { transform: translate(-50%, -50%) rotate(45deg) scaleX(0); }
}
#custom-cursor.implode .arm-b{
  animation-name: arm-implode-b;
}
@keyframes arm-implode-b{
  0%   { transform: translate(-50%, -50%) rotate(-45deg) scaleX(1); }
  60%  { transform: translate(-50%, -50%) rotate(-45deg) scaleX(0.25); }
  100% { transform: translate(-50%, -50%) rotate(-45deg) scaleX(0); }
}

/* optional: dot gives a tiny pop during implode */
#custom-cursor.implode .dot{
  animation: dot-pop 220ms ease-out;
}
@keyframes dot-pop{
  0%   { transform: translate(-50%, -50%) scale(1); }
  60%  { transform: translate(-50%, -50%) scale(1.25); }
  100% { transform: translate(-50%, -50%) scale(1); }
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce){
  #custom-cursor{ animation: none !important; }
  #custom-cursor.implode .arm,
  #custom-cursor.implode .arm-b,
  #custom-cursor.implode .dot{ animation: none !important; }
}

/* Hide native cursor ONLY while pointer-locked */
html.pointer-locked, html.pointer-locked *{ cursor: none !important; }
